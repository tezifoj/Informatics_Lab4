with open(r"Инф4.toml", "r", encoding="utf-8") as f:
    text = f.read()

def parse_toml(content):
    result = {}
    current_section = result
    lines = content.split('\n')

    for line in lines:
        line = line.strip()

        if not line or line.startswith('#'):
            continue

        # [schedule.monday.subject1]
        if line.startswith("[") and line.endswith("]"):
            section_path = line[1:-1].split(".")

            current_section = result
            stack = []

            for i in section_path:
                if i not in current_section:
                    current_section[i] = {}
                stack.append(current_section)
                current_section = current_section[i]

        elif "=" in line:
            key, value = line.split('=', 1)
            key = key.strip()
            value = value.strip()

            if "." in key:
                one, two = key.split('.', 1)
                if two not in current_section or not isinstance(current_section[two], dict):
                    current_section[two] = {}

                current_section[two][one] = parse_value(value)
            else:
                current_section[key] = parse_value(value)
    return result

def parse_value(value):
    value = value.strip()
    if (value.startswith('"') and value.endswith('"')) or (value.startswith("'") and value.endswith("'")):
        return value[1:-1]

    if ':' in value and value.count(':') == 2:
        return value

    if value.lower() == "true":
        return True
    if value.lower() == "false":
        return False

    if value.lower() == "null" or value.lower() == "":
        return None

    return value

parsed_data = parse_toml(text)
print(parsed_data)
